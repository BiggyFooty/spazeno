<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sparez - Rezervasyon</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="booking-page">
    <div class="app-shell">
        <!-- Status Bar removed as requested -->

        <!-- Header -->
        <div class="header">
            <a href="javascript:history.back()" class="back-button">
                <i class="fas fa-chevron-left"></i> İptal
            </a>
            <div style="flex: 1; text-align: center;">
                <h1 style="font-size: var(--font-size-lg);">Spa Hizmeti Rezervasyonu</h1>
            </div>
            <a href="booking-confirmation.html" style="color: var(--primary-color); text-decoration: none; font-size: var(--font-size-md);">Tamam</a>
        </div>

        <!-- Booking Form -->
        <div class="booking-form">
            <form id="booking-form">
                <!-- Service Selection -->
                <div class="booking-form-section">
                    <h3>Spa Hizmetleri</h3>
                    
                    <div class="category-pills">
                        <div class="category-pill active" data-category="massage">Masaj</div>
                        <div class="category-pill" data-category="facial">Lüks Cilt Bakımı</div>
                        <div class="category-pill" data-category="treatment">Spa Tedavisi</div>
                        <div class="category-pill" data-category="hotstone">Sıcak Taş</div>
                        <div class="category-pill" data-category="aromatherapy">Aromaterapi</div>
                    </div>
                </div>

                <!-- Service Options -->
                <div class="booking-form-section">
                    <h3>Hizmet Seçin</h3>
                    
                    <div class="service-options">
                        <div class="service-option active">
                            <div class="service-option-info">
                                <h4>İsveç Masajı</h4>
                                <p>60 dakika • ₺1.590</p>
                            </div>
                            <div class="service-option-check">
                                <i class="fas fa-check-circle"></i>
                            </div>
                        </div>
                        
                        <div class="service-option">
                            <div class="service-option-info">
                                <h4>Derin Doku Masajı</h4>
                                <p>90 dakika • ₺2.050</p>
                            </div>
                            <div class="service-option-check">
                                <i class="fas fa-circle"></i>
                            </div>
                        </div>
                        
                        <div class="service-option">
                            <div class="service-option-info">
                                <h4>Aromaterapi Masajı</h4>
                                <p>75 dakika • ₺1.750</p>
                            </div>
                            <div class="service-option-check">
                                <i class="fas fa-circle"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rating Selection -->
                <div class="booking-form-section">
                    <h3>Minimum Değerlendirme</h3>
                    
                    <div style="display: flex; margin-top: var(--spacing-md);">
                        <div style="display: flex; align-items: center; margin-right: var(--spacing-lg);">
                            <i class="fas fa-star" style="color: var(--rating-color); margin-right: var(--spacing-xs);"></i>
                            <i class="fas fa-star" style="color: var(--rating-color); margin-right: var(--spacing-xs);"></i>
                            <i class="fas fa-star" style="color: var(--rating-color); margin-right: var(--spacing-xs);"></i>
                            <i class="fas fa-star" style="color: var(--rating-color); margin-right: var(--spacing-xs);"></i>
                            <i class="fas fa-star" style="color: var(--rating-color); margin-right: var(--spacing-xs);"></i>
                        </div>
                        <span>4.2 Yıldız</span>
                    </div>
                </div>

                <!-- Gender Selection -->
                <div class="booking-form-section">
                    <h3>Terapist Cinsiyet Tercihi</h3>
                    
                    <div class="gender-options">
                        <div class="gender-option active">
                            <span>Erkek</span>
                        </div>
                        <div class="gender-option">
                            <span>Kadın</span>
                        </div>
                        <div class="gender-option">
                            <span>Fark Etmez</span>
                        </div>
                    </div>
                </div>

                <!-- Date Selection -->
                <div class="booking-form-section">
                    <h3>Tarih Seçin</h3>
                    
                    <div class="date-picker">
                        <div class="date-item" data-date="2025-03-12">
                            <span class="day">Çar</span>
                            <span class="date">12</span>
                        </div>
                        <div class="date-item active" data-date="2025-03-13">
                            <span class="day">Per</span>
                            <span class="date">13</span>
                        </div>
                        <div class="date-item" data-date="2025-03-14">
                            <span class="day">Cum</span>
                            <span class="date">14</span>
                        </div>
                        <div class="date-item" data-date="2025-03-15">
                            <span class="day">Cmt</span>
                            <span class="date">15</span>
                        </div>
                        <div class="date-item" data-date="2025-03-16">
                            <span class="day">Paz</span>
                            <span class="date">16</span>
                        </div>
                        <div class="date-item" data-date="2025-03-17">
                            <span class="day">Pzt</span>
                            <span class="date">17</span>
                        </div>
                        <div class="date-item" data-date="2025-03-18">
                            <span class="day">Sal</span>
                            <span class="date">18</span>
                        </div>
                    </div>
                </div>

                <!-- Time Selection -->
                <div class="booking-form-section">
                    <h3>Saat Seçin</h3>
                    
                    <div class="time-slots">
                        <div class="time-slot">09:00</div>
                        <div class="time-slot">10:00</div>
                        <div class="time-slot active">11:00</div>
                        <div class="time-slot">12:00</div>
                        <div class="time-slot disabled">13:00</div>
                        <div class="time-slot">14:00</div>
                        <div class="time-slot">15:00</div>
                        <div class="time-slot disabled">16:00</div>
                        <div class="time-slot">17:00</div>
                    </div>
                </div>
                
                <!-- Confirm Button - Moved outside the section for better positioning -->
                <div style="padding: 0 var(--spacing-md); margin-bottom: 100px;">
                    <a href="booking-confirmation.html" class="btn btn-primary btn-block btn-animated" style="position: relative; z-index: 10;">Rezervasyonu Onayla</a>
                </div>
            </form>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <a href="home.html" class="nav-item" data-page="home">
                <i class="fas fa-home"></i>
                <span>Ana Sayfa</span>
            </a>
            <a href="booking.html" class="nav-item active" data-page="booking">
                <i class="far fa-calendar"></i>
                <span>Rezervasyon</span>
            </a>
            <a href="services.html" class="nav-item" data-page="services">
                <i class="fas fa-spa"></i>
                <span>Hizmetler</span>
            </a>
            <a href="profile-summary.html" class="nav-item" data-page="profile">
                <i class="far fa-user"></i>
                <span>Profil</span>
            </a>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/page-transitions.js"></script>
    <script src="js/hotel-data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const serviceParam = urlParams.get('service');
            const hotelParam = urlParams.get('hotel');
            
            // Set service based on URL parameter
            if (serviceParam) {
                const categoryPills = document.querySelectorAll('.category-pill');
                const serviceOptions = document.querySelectorAll('.service-option');
                
                // Set default active service
                let activeServiceIndex = 0;
                
                if (serviceParam === 'swedish-massage') {
                    // Already default active
                } else if (serviceParam === 'deep-tissue') {
                    activeServiceIndex = 1;
                } else if (serviceParam === 'hot-stone') {
                    // Not in the list, would need to add it
                } else if (serviceParam === 'luxury-facial') {
                    // Switch to facial category
                    categoryPills.forEach(pill => pill.classList.remove('active'));
                    document.querySelector('.category-pill[data-category="facial"]').classList.add('active');
                }
                
                // Set active service option
                if (activeServiceIndex > 0 && activeServiceIndex < serviceOptions.length) {
                    serviceOptions.forEach(option => {
                        option.classList.remove('active');
                        option.querySelector('.service-option-check i').className = 'fas fa-circle';
                    });
                    
                    serviceOptions[activeServiceIndex].classList.add('active');
                    serviceOptions[activeServiceIndex].querySelector('.service-option-check i').className = 'fas fa-check-circle';
                }
            }
            
            // Set hotel information if provided
            if (hotelParam) {
                // Find the hotel in the data
                const hotels = window.hotelData || [];
                const selectedHotel = hotels.find(h => h.sube_adi === hotelParam);
                
                if (selectedHotel) {
                    // Add hotel information section
                    const bookingForm = document.querySelector('.booking-form');
                    const confirmButton = bookingForm.querySelector('div[style="padding: 0 var(--spacing-md); margin-bottom: 100px;"]');
                    
                    // Create hotel info section
                    const hotelSection = document.createElement('div');
                    hotelSection.className = 'booking-form-section';
                    hotelSection.innerHTML = `
                        <h3>Seçilen Otel</h3>
                        <div class="card" style="margin-top: var(--spacing-md); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);">
                            <div style="display: flex; padding: var(--spacing-md);">
                                <img src="https://source.unsplash.com/300x200/?hotel,spa,${selectedHotel.otel_isim.replace(' ', '')}" 
                                     alt="${selectedHotel.sube_adi}" 
                                     style="width: 80px; height: 80px; border-radius: 8px; object-fit: cover;">
                                <div style="margin-left: var(--spacing-md); flex: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                        <div>
                                            <div class="rating" style="margin-bottom: 4px;">
                                                <span class="stars">★</span>
                                                <span class="value">${selectedHotel.google_yildiz.toFixed(1)}</span>
                                            </div>
                                            <h4 style="margin: 0; font-size: var(--font-size-md);">${selectedHotel.sube_adi}</h4>
                                            <p style="margin: 4px 0 0; font-size: var(--font-size-xs); color: var(--text-muted);">${selectedHotel.otel_isim}</p>
                                        </div>
                                    </div>
                                    <p style="margin: var(--spacing-sm) 0; font-size: var(--font-size-sm);">${selectedHotel.adres}</p>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Insert before the confirm button
                    bookingForm.insertBefore(hotelSection, confirmButton);
                    
                    // Update the confirm button to include hotel information
                    const confirmButtonLink = confirmButton.querySelector('a');
                    const currentHref = confirmButtonLink.getAttribute('href');
                    confirmButtonLink.setAttribute('href', `${currentHref}?hotel=${encodeURIComponent(selectedHotel.sube_adi)}`);
                }
            }
            
            // Add loading animation with quotes
            const loadingQuotes = [
                "Huzurlu bir zihin, sağlıklı bir vücudun temelidir.",
                "Dinlenme anı, hayatın en güzel anlarından biridir.",
                "Kendinize zaman ayırmak, başkalarına daha iyi hizmet etmenin anahtarıdır.",
                "Zihin sakinleştiğinde, vücut iyileşir.",
                "İç huzur, dış güzelliğin kaynağıdır.",
                "Nefes al, bırak ve anın tadını çıkar.",
                "Kendine iyi bakmak, bencillik değil, hayatta kalmak için bir gerekliliktir."
            ];
            
            // Show loading animation when confirming booking
            const confirmButton = document.querySelector('.btn-animated');
            if (confirmButton) {
                confirmButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Create loading overlay
                    const overlay = document.createElement('div');
                    overlay.style.position = 'fixed';
                    overlay.style.top = '0';
                    overlay.style.left = '0';
                    overlay.style.width = '100%';
                    overlay.style.height = '100%';
                    overlay.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
                    overlay.style.display = 'flex';
                    overlay.style.flexDirection = 'column';
                    overlay.style.alignItems = 'center';
                    overlay.style.justifyContent = 'center';
                    overlay.style.zIndex = '9999';
                    
                    // Get random quote
                    const randomQuote = loadingQuotes[Math.floor(Math.random() * loadingQuotes.length)];
                    
                    overlay.innerHTML = `
                        <div class="loading-spinner" style="margin-bottom: 2rem;">
                            <i class="fas fa-spa fa-spin" style="font-size: 3rem; color: var(--primary-color);"></i>
                        </div>
                        <p class="quote" style="font-style: italic; color: var(--text-muted); margin-bottom: 1rem; text-align: center; max-width: 80%;">
                            "${randomQuote}"
                        </p>
                        <p style="font-size: 1rem; color: var(--text-muted);">Rezervasyonunuz oluşturuluyor...</p>
                    `;
                    
                    document.body.appendChild(overlay);
                    
                    // Redirect after delay
                    setTimeout(() => {
                        const href = this.getAttribute('href');
                        window.location.href = href;
                    }, 3000);
                });
            }
            // Service category selection
            const categoryPills = document.querySelectorAll('.category-pill');
            categoryPills.forEach(pill => {
                pill.addEventListener('click', function() {
                    categoryPills.forEach(p => p.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Service option selection
            const serviceOptions = document.querySelectorAll('.service-option');
            serviceOptions.forEach(option => {
                option.addEventListener('click', function() {
                    serviceOptions.forEach(o => {
                        o.classList.remove('active');
                        o.querySelector('.service-option-check i').className = 'fas fa-circle';
                    });
                    this.classList.add('active');
                    this.querySelector('.service-option-check i').className = 'fas fa-check-circle';
                });
            });
            
            // Gender option selection
            const genderOptions = document.querySelectorAll('.gender-option');
            genderOptions.forEach(option => {
                option.addEventListener('click', function() {
                    genderOptions.forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Date selection
            const dateItems = document.querySelectorAll('.date-item');
            dateItems.forEach(item => {
                item.addEventListener('click', function() {
                    dateItems.forEach(d => d.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Time slot selection
            const timeSlots = document.querySelectorAll('.time-slot:not(.disabled)');
            timeSlots.forEach(slot => {
                slot.addEventListener('click', function() {
                    timeSlots.forEach(s => s.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Form submission
            const bookingForm = document.getElementById('booking-form');
            bookingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                window.location.href = 'booking-confirmation.html';
            });
        });
    </script>
</body>
</html>
